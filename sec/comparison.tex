
\section{The Cartan--Serre comparison map} \label{s:the cartan-serre comparison map}

Let us consider, with their usual CW structures, the topological simplex $\gsimplex^n$
%\[
%\gsimplex^{\!n} = \{(y_0, \dots, y_n) \mid y_i \in [0,1], \ \textstyle{\sum} \, y_i = 1\}
%\]
and the topological cube $\gcube^n$.
In \cite[p. 442]{serre1951homologie}, Serre described for any space a quasi-isomorphism of coalgebras between its simplicial and cubical singular chains induced by precomposing with a canonical cellular map $\CScollapse \colon \gcube^n \to \gsimplex^n$ also considered in \cite[p.199]{eilenberg1953acyclic} where it is attributed to Cartan.

%\begin{definition}
%	The \textit{Cartan--Serre collapse map}
%	\[
%	\CScollapse \colon \gcube^n \to \gsimplex^{\!n}
%	\]
%	is the natural cellular map defined by
%	\begin{equation} \label{e:cartan-serre collapse map}
%	\begin{split}
%	&y_0 = 1 - x_1, \\
%	&y_1 = x_1(1 - x_2), \\
%	&\ \vdots \\
%	&y_{n-1} = x_1 x_2 \dots x_{n-1}(1-x_n), \\
%	&y_{n} = x_1 x_2 \dots x_n.
%	\end{split}
%	\end{equation}
%\end{definition}

%The aforementioned comparison map of singular chains is given, for any space $Z$, by precomposing a simplicial singular simplex $\gsimplex^n \to Z$ with $\CScollapse$.

The goal of this section is to deduce from a more general categorical statement that this comparison map is a quasi-isomorphism of $E_\infty$-coalgebras and, as a consequence, that its linear dual is one of $E_\infty$-algebras.

\subsection{Simplicial sets}

We denote the \textit{simplex category} by $\simplex$, the category of \textit{simplicial sets} $\Fun(\simplex^\op, \Set)$ by $\sSet$ and the standard $n$-simplex by $\simplex^n$.
As usual, we denote an element in $\simplex^n_m$ by a non-decreasing tuples $[v_0, \dots, v_m]$ with $v_i \in \{0, \dots, n\}$.
The \textit{product} of simplicial sets is defined object-wise.
For example,
\[
\big(\simplex^n \times \simplex^{n^\prime}\big)_m = \simplex^n_m \times \simplex^{n^\prime}_m
\]
consists of pairs of non-decreasing tuples $[v_0, \dots, v_m] \times [w_0, \dots, w_m]$ of appropriate integers.

The \textit{simplicial singular complex} functor is denoted by $\sSing \colon \Top \to \sSet$ and the functor of (normalized) \textit{chains} by $\schains \colon \sSet \to \Ch$.
We omit the superscript $\simplex$ from either of these if no confusion may result from doing so.

The \textit{Alexander--Whitney coalgebra} functor is the Yoneda extension of the functor defined by the following natural maps.
For any $n \in \N$, define $\epsilon \colon \chains(\simplex^n) \to \k$ by
\[
\epsilon \big( [v_0, \dots, v_q] \big) = \begin{cases} 1 & \text{ if } q = 0, \\ 0 & \text{ if } q>0, \end{cases}
\]
and $\Delta \colon \chains(\simplex^n) \to \chains(\simplex^n)^{\otimes2}$ by
\[
\Delta \big( [v_0, \dots, v_q] \big) = \sum_{i=0}^q [v_0, \dots, v_i] \otimes [v_i, \dots, v_q].
\]




\subsection{Triangulation and its right adjoint}

The \textit{simplicial $n$-cube} is the $n^\th$-fold Cartesian product $\scube{n}$.
The assignment $2^n \mapsto \scube{n}$ defines a functor $\cube \to \sSet$ with $\delta_i^\varepsilon \colon \scube{n} \to \scube{(n+1)}$ inserting $[\varepsilon, \dots, \varepsilon]$ as $i^\th$ factor and $\sigma_i \colon \scube{(n+1)} \to \scube{n}$ removing the $i^\th$ factor.
Its Yoneda extension
\[
\triangulate \colon \cSet \to \sSet
\]
is referred to as the \textit{triangulation} functor, which admits a right adjoint
\[
\cubify \colon \sSet \to \cSet
\]
defined by
\[
\cubify(X)(2^m) = \sSet \big( \scube{n}, \, X \big).
\]

As proven in \cite[\subsectionSymbol 8.4.30]{cisinski2006presheaves}, the pair $(\triangulate,\, \cubify)$ defines a Quillen equivalence when $\sSet$ and $\cSet$ are considered as model categories.

\subsection{Projection and inclusion} \label{ss:projection and inclusion}

We define for each $n \in \N$ a natural simplicial map
\[
\projection \colon \scube{n} \to \simplex^n
\]
referred to as the \textit{projection} by
\[
[\varepsilon_0^1, \dots, \varepsilon_m^1] \times \dots \times [ \varepsilon_0^n, \dots, \varepsilon_m^n] \mapsto
[v_0, \dots, v_m]
\]
where
\[
v_i = \varepsilon_i^1 + \varepsilon_i^1 \varepsilon_i^2 + \dots + \varepsilon_i^1 \dotsm \varepsilon_i^n.
\]
Together with the naturality of the projection with respect morphisms in the simplex category we have the following compatibility with respect to cubical coface maps:
For $i \in \{1,\dots,n\}$
\begin{equation} \label{e:projection cubical compatibility}
\projection \circ \, \delta_i^1 = \delta_{i-1} \circ \pi, \qquad
\projection \circ \, \delta_n^0 = \delta_{n} \circ \pi,
\end{equation}
and $\projection \circ \, \delta^0_i$ is degenerate for $1 < i < n$.

The projection has a section
\[
\inclusion \colon \simplex^n \to \scube{n}
\]
defined by sending $\id_{[n]}$ to $\varepsilon^1 \times \dots \times \varepsilon^n$ with
\[
\varepsilon^i = [\overbrace{0, \dots, 0}^{i}, 1, \dots, 1].
\]


\subsection{The subdivision map}

The \textit{subdivision} map of a cubical set $X$
\[
\subdivide_X \colon \cchains(X) \to \schains(\triangulate X)
\]
is the natural chain map defined by the well known Eilenberg--Zilber map
\[
\subdivide \colon \chains(\cube^n) \cong \chains(\simplex^1)^{\otimes n} \xra{EZ} \chains \scube{n}.
\]

The $EZ$ map is natural with respect to cubical morphisms and, consequently, so is the subdivision map $\subdivide$.

We can use the subdivision map to provide an alternative description of the complex $\cchains(\cubify Y)$ for any simplicial set $Y$.
Since the category of cubical maps $\cube^n \to \cubify Y$ is equivalent to the category $\sC_Y$ whose objects are chain maps
\[
\chains(\cube^n) \xra{\subdivide} \chains \scube{n} \to \schains(Y)
\]
where the second map is induced from a simplicial map
and morphisms are appropriate commutative diagrams, we have
\begin{equation} \label{e:alternative description of NUY}
\cchains(\cubify Y) \cong \colim_{\cC_Y} \chains(\cube^n).
\end{equation}

\subsection{The Cartan--Serre collapse map}

Let us consider the model of the topological $n$-simplex given by
\[
\gsimplex^n = \big\{ (y_1, \dots, y_n) \in \gcube^n \mid i \leq j \Rightarrow y_i \geq y_j \big\},
\]
whose cell structure associates $[v_0, \dots, v_m]$ with the subset
\[
\Big\{ \big( \underbrace{1, \dots, 1}_{v_0}, \underbrace{y^\prime_1, \dots y^\prime_1}_{v_1-v_0}, \dots, \underbrace{y^\prime_m, \dots y^\prime_m}_{v_m-v_{m-1}}, \underbrace{0, \dots, 0}_{n-v_m} \big) \mid y^\prime_1 \geq \dots \geq y^\prime_m \Big\}.
\]
The spaces $\gsimplex^n$ define a functor $\simplex \to \Top$ with codegeneracies given by
\[
\sigma_i(x_1, \dots, x_n) = (x_1, \dots, \widehat x_i, \dots, x_n)
\]
and coface maps by
\begin{align*}
\delta_0(x_1, \dots, x_n) &= (1, x_1, \dots, x_n), \\
\delta_i(x_1, \dots, x_n) &= (x_1, \dots, x_i, x_i, \dots, x_n), \\
\delta_n(x_1, \dots, x_n) &= (x_1, \dots, x_n, 0).
\end{align*}

The \textit{Cartan-Serre collapse map} is the cellular map defined by
\[
\CScollapse(x_1, \dots, x_n) = (x_1,\ x_1 x_2, \, \dots \, , \ x_1 \dotsm x_n).
\]
It is straightforward to verify that
\begin{align*}
\CScollapse \circ \, \delta_i^1 = \delta_{i-1} \circ \CScollapse, \qquad
\CScollapse \circ \, \delta_n^0 = \delta_n \circ \CScollapse,
\end{align*}
for $i \in \{1, \dots, n\}$ and that the image of $\CScollapse \circ \, \delta_i^0$ for $1 \leq i < n$ is in a lower dimensional skeleton of $\gsimplex^n$.
Therefore, since the image under the induced chain map $\CScollapse_\ast$ of the top dimensional generator of $\gchains(\gcube^n)$ is $[0, \dots, n]$ as is for $\chains(\cube^n)$ under $\projection_\ast \circ \subdivide$, we have the following.

\begin{lemma}
	The composition
	\[
	\gchains(\gcube^n) \cong \chains(\cube^n) \xra{\subdivide} \chains \big( \scube{n} \big) \xra{\projection_\ast} \chains(\simplex^n) \cong \gchains(\gsimplex^n)
	\]
	agrees the chain map $\CScollapse_\ast$ induced by Cartan--Serre collapse map.
\end{lemma}

For later use we record the following.
\begin{lemma} \label{l:kernel of psi}
	For any basis element $x = x_1 \otimes \cdots \otimes x_n$ of degree $m$ we have $\CScollapse_\ast(x) = 0$ if there exists $i < j$ such that $x_i = [0]$ and $x_j = [0,1]$.
	Otherwise, $\CScollapse_\ast(x) = [v_0, \dots, v_m]$ with
\end{lemma}

\begin{proof}
	This follows from noticing that for any point in $\gcube^n$ whose $i^\th$ coordinate is $0$, its image under the Cartan--Serre collapse map has $j^\th$ coordinate equal to $0$ for every $j \geq i$.
\end{proof}

We remark that Cartan used the model of the topological $n$-simplex as a subset of $\R^{n+1}$ in \cite[p. 442]{serre1951homologie} to define the collapse map.
We find it more convenient to use the model of $\gsimplex^n$ as a subset of $\gcube^n$.

%There is a preferred element in $\cubify \simplex^n$ given by the composition $\subdivide \circ \projection_\ast$ where $\projection_\ast$
%is the chain map induced by the projection $\projection$.
%We now give a geometric description of this map.

%We now study the induced chain map.
%Let $x = x_1 \otimes \cdots \otimes x_n \in \gchains(\gcube^n)$ be basis element of degree $m$ with $x_{p_i} = [0,1]$ for some $p_1 < \dots < p_m$.
%Let $q = \min\{i \mid x_i = [0]\}$ or $q = n+1$ if empty.
%If $q < p_i$ for some $i$ then $\CScollapse_\ast(x) = 0$ since the image of its associated cell is mapped into a lower dimensional skeleton.
%If not, let us consider the element $x_{<q} = x_1 \otimes \dots \otimes x_{q-1}$.
%
%we have
%
%and we have
%\begin{lemma} \label{l:kernel of psi}
%	For any basis element $x = x_1 \otimes \cdots \otimes x_n$ of degree $m$ we have $\CScollapse_\ast(x) = 0$ if there exists $i < j$ such that $x_i = [0]$ and $x_j = [0,1]$.
%	Otherwise, $\CScollapse_\ast(x) = [v_0, \dots, v_m]$ with
%\end{lemma}
%
%\begin{proof}
%	This follows from noticing that for any point in $\gcube^n$ whose $i^\th$ coordinate is $0$, its image under the Cartan--Serre collapse map has $j^\th$ coordinate equal to $0$ for every $j \geq i$.
%\end{proof}

\subsection{The Cartan--Serre comparison map} \label{ss:comparison map}

The projection $\projection \colon \scube{n} \to \simplex^{\!n}$ induces for any simplicial set $Y$ a natural morphism of graded sets
\[
Y \to \cubify Y
\]
defined on a standard simplex $\simplex^n$ by
\[
\big( [m] \xra{\sigma} [n] \big) \mapsto
\big( \scube{m} \xra{\projection} \simplex^m \xra{\sigma_\ast} \simplex^n \big).
\]
Additionally, passing to chains gives a graded linear map
\[
\CScomp_Y \colon \schains(Y) \to \cchains(\cubify Y)
\]
which we refer to as the \textit{Cartan--Serre comparison map}.

We can give a more explicit description of this map using \eqref{e:alternative description of NUY}:
It suffices to describe the case $Y = \simplex^n$ given by
\[
\begin{tikzcd}[column sep=small, row sep=0]
\chains(\simplex^n) \arrow[r, "\CScomp"] &
\chains(\cubify \simplex^n) \\
\id_{[n]} \arrow[r, mapsto] &
\CScollapse_\ast.
\end{tikzcd}
\]

We have the following key result.

\begin{lemma} \label{l:cartan serre quasi-iso}
	The Cartan--Serre comparison map $\CScomp_Y$ is a quasi-isomorphism for any simplicial set $Y$
\end{lemma}

\begin{proof}
	It suffices to prove this for $Y = \simplex^n$ since the general statement follows from naturality and an acyclic carrier argument \cite{eilenberg1953acyclic}.
	Since $\CScollapse_\ast = \chains \projection \circ \subdivide$ is a chain map, we have
	\begin{align*}
	\CScomp \big( \partial^\simplex \id_{[n]} \big) \defeq
	\partial^\simplex \circ \CScollapse_\ast =
	\CScollapse_\ast \circ \, \partial^\cube \defeq
	\partial^\cube \CScomp (\id_{[n]}).
	\end{align*}
	That $\CScomp$ induces an isomorphism in homology can be seen easily from the contractibility of both $\simplex^n$ and $\cubify \simplex^n$.
\end{proof}

\subsection{Simplicial $E_\infty$-structure} \label{ss:e infinity structures}

In \cite{medina2020prop1}, a similar construction to the one introduced in \cref{s:action} provides the chains of simplicial sets with a natural $\UM$-coalgebra structure.
It is also induced from a natural $\M$-bialgebra structure on the chains of representables objects, standard simplices in this case.
This $\M$-bialgebra structure on $\chains(\simplex^{\!n})$ is defined by the assignment
\[
\counit \mapsto \epsilon, \quad \coproduct \mapsto \Delta, \quad \product \mapsto \ast,
\]
where $\epsilon$ and $\Delta$ constitute the Alexander--Whitney coalgebra structure on simplicial chains, and
\[
\ast \colon \chains(\simplex^{\!n})^{\otimes 2} \to \chains(\simplex^{\!n})
\]
is an algebraic version of the \textit{join} defined by
\[
\left[v_0, \dots, v_p \right] \ast \left[v_{p+1}, \dots, v_q\right] = \begin{cases} (-1)^{p+|\pi|} \left[v_{\pi(0)}, \dots, v_{\pi(q)}\right] & \text{ if } v_i \neq v_j \text{ for } i \neq j, \\
0 & \text{ if not}, \end{cases}
\]
where $\pi$ is the permutation that orders the totally ordered set of vertices and $(-1)^{|\pi|}$ is its sign.

Although for any simplicial set $Y$ both $\schains(Y)$ and $\cchains(\cubify Y)$ have natural $\UM$-structures, the map $\CScomp_Y$ is not a morphism of $\UM$-coalgebras for an arbitrary $Y$.
Nevertheless, after restriction of their $\UM$-structures via an inclusion of $E_\infty$-operads $\USL \to \UM$, the Cartan--Serre comparison map becomes a morphism of $E_\infty$-coalgebras.

The operad $\USL$ is generated as a suboperad of $\UM$ by all so called \textit{surjection-like} graphs, i.e., immerse connected graphs of the form
\input{aux/surjection_like}
where there are no hidden vertices and the strands are joined so that the associated maps $\{1, \dots, k_j\} \to \{1, \dots, n+k\}$ are order-preserving.
We notice that the subcomplex of surjection-like $(1,r)$-graphs is contractible using the same chain contraction employed in \cite{medina2020prop1}.
This implies that the suboperad $\USL$ of $\UM$ is also $E_\infty$.

\begin{example}
	We illustrate the need to restrict to $\USL$ by providing a simple example showing that $\CScollapse_\ast$ does not preserve $\M$-structures.
	From it is easy to construct others showing $\CScollapse_\ast$ does not preserve the $\UM$-structures either.

	Since $\CScollapse_\ast \big( [0] \otimes [0,1] \big) = 0$ and
	\begin{align*}
	\big( [1] \otimes [1] \big) \ast \big( [0] \otimes [0,1] \big) &=
	- \big( [0,1] \otimes [0,1] \big), \\
	- \CScollapse_\ast \big( [0,1] \otimes [0,1] \big) & = - [0,1,2]
	\end{align*}
	we have
	\[
	\CScollapse_\ast \big( [1] \otimes [1] \big) \ast \CScollapse_\ast \big( [0] \otimes [0,1] \big) \neq \CScollapse_\ast \Big( ([1] \otimes [1]) \ast ([0] \otimes [0,1]) \Big).
	\]
	We will return to this example in \cref{ss:comparison proof} after introducing further structure on the image of elements in $\USL$ missing from that of general elements in $\UM$.
\end{example}

\subsection{The Cartan--Serre comparison map as an $E_\infty$-coalgebra morphism} \label{ss:the cartan-serre chain map}

We now come to the main result of this section.

\begin{theorem} \label{t:main comparison}
	The Cartan--Serre comparison map $\CScomp_Y \colon \schains(Y) \to \cchains(\cubify Y)$ is a quasi-isomorphism of $\USL$-coalgebras for any simplicial set $Y$
\end{theorem}

We deduce this from the following result which we prove in \cref{ss:comparison proof}.

\begin{lemma} \label{l:main comparison}
	The chain map $\CScollapse_\ast \colon \chains(\cube^n) \to \chains(\simplex^n)$ induced by the Cartan--Serre collapse map is a quasi-isomorphism of $\USL$-coalgebras for every $n \in \N$.
\end{lemma}

\begin{proof}[Proof of \cref{t:main comparison}]
	It suffices to prove this for $Y = \simplex^n$.
	Since $\CScollapse_\ast = \projection_\ast \circ \subdivide$ is a morphism of $\USL$-coalgebras (\cref{l:main comparison}), for any $\Gamma \in \USL(r)$ we have
	\begin{align*}
	\CScomp^{\otimes r} \! \big( \Gamma(\id_{[n]}) \big) \defeq
	\Gamma \circ \CScollapse_\ast =
	\CScollapse_\ast^{\otimes r} \! \circ \, \Gamma \defeq
	\Gamma \big( \CScomp (\id_{[n]}) \big),
	\end{align*}
	as claimed.
\end{proof}

For any topological space $Z$ the (\textit{topological}) \textit{Cartan--Serre comparison map}
\[
\CScomp_Z \colon \chains(\sSing Z) \to \chains(\cSing Z)
\]
is the chain map obtained by precomposing a singular simplex with the Cartan--Serre collapse map $\CScollapse \colon \gcube^n \to \gsimplex^{\!n}$.
We have the following consequence of \cref{t:main comparison}.

\begin{corollary} \label{t:topological comparison}
	For any topological space $Z$, the quasi-isomorphism
	\[
	\chains(\sSing Z) \to \chains(\cSing Z)
	\]
	is a morphism of $E_\infty$-coalgebras, where the domain and target $E_\infty$-structures extend respectively the Alexander--Whitney and Serre coalgebra structures.
\end{corollary}

\begin{proof}
	This map factors as a composition
	\[
	\chains(\sSing Z) \to \chains(\cubify \sSing Z) \to \chains(\cSing Z)
	\]
	where the first map is the Cartan--Serre comparison map of \cref{ss:comparison map} and the second is induced from the morphism of cubical sets defined by the assignment
	\[
	\big( \scube{n} \xra{F} \sSing Z \big) \mapsto
	\big( \gcube^n \cong \bars{\scube{n}} \xra{\bars{\projection}} \gsimplex^n \xra{F(\inclusion(\id_{[n]}))} Z \big)
	\]
	where $\inclusion$ is the section of $\projection$ defined in \cref{ss:projection and inclusion}.
	The first is a morphism of $\USL$-coalgebras by \cref{t:main comparison} and the second by naturality, so the statement is proven.
\end{proof}


\subsection{Proof of \cref{l:main comparison}} \label{ss:comparison proof}

Throughout this subsection we use the identifications $\chains(\cube^n) \cong \gchains(\gcube^n)$ and $\chains(\simplex^n) \cong \gchains(\gsimplex^n)$.
By naturality, it suffices to show that
\begin{equation} \label{e:Cartan--Serre E-coalgebra map}
\CScollapse_\ast^{\otimes r} \! \circ \, \Gamma \big( [0,1]^{\otimes n} \big) =
\Gamma \circ \CScollapse_\ast \big( [0,1]^{\otimes n} \big),
\end{equation}
where $\Gamma$ is represented by a surjection-like graph in $\USL(r)$.

We begin with the following enhancement of \cref{l:cartan serre quasi-iso}.

\begin{lemma}
	The chain map $\CScollapse_\ast$ is a quasi-isomorphism of coalgebras.
\end{lemma}

\begin{proof}
	Since vertices are sent to vertices by $\CScollapse$, we have $\CScollapse_\ast \circ \, \epsilon = \epsilon \circ \CScollapse_\ast$.
	To study the compatibility of $\CScollapse$ with coproducts consider $n > 0$ and
	\[
	\Delta \big( [0,1]^{\otimes n} \big) = \sum_{\lambda \in \Lambda} \pm \ x_1^{(\lambda)} \otimes \cdots \otimes x_n^{(\lambda)} \bm{\otimes} y_1^{(\lambda)} \otimes \cdots \otimes y_n^{(\lambda)},
	\]
	where $\Lambda$ parameterizes all choices of $x_i^{(\lambda)} \in \{[0], [0,1]\}$ and $y_i^{(\lambda)} \in \{[0,1], [1]\}$ such that
	\begin{align*}
	x_i^{(\lambda)} = [0]   & \iff y_i^{(\lambda)} = [0,1], \\
	x_i^{(\lambda)} = [0,1] & \iff y_i^{(\lambda)} = [1].
	\end{align*}
	By \cref{l:kernel of psi}, the summands above not sent to $0$ by $\CScollapse_\ast \otimes \CScollapse_\ast$ are those basis elements for which $x_i^{(\lambda)} = [0]$ implies $x_j^{(\lambda)} = [0]$ for all $i < j$.
	For any one such summand, its sign is positive and its image by $\CScollapse_\ast \otimes \CScollapse_\ast$ is $[0, \dots, k] \otimes [k, \dots, n]$ where $k+1 = \min \{i \mid x_i^{(\lambda)} = [0]\}$ or $k = n$ if this set is empty.
	The summands $[0, \dots, k] \otimes [k, \dots, n]$ are precisely those appearing when applying the Alexander--Whitney coproduct to $[0, \dots, n] = \CScollapse_\ast \big( [0,1]^{\otimes n} \big)$.
\end{proof}

We will consider the basis of $\chains(\cube^n)$ as a poset in the following way.

\begin{definition}
	For $n = 1$ we set $[0] < [0,1] < [1]$, and for $n > 1$ we have $(x_1 \otimes \cdots \otimes x_n) \leq (y_1 \otimes \cdots \otimes y_n)$ iff $x_i \leq y_i$ for each $i \in \{1, \dots, n\}$.
\end{definition}

\begin{lemma}
	Let $\Delta^{r-1}$ be the $(r-1)^\th$ iterated Serre coproduct.
	If
	\[
	\Delta^{r-1} \big([0,1]^{\otimes n}\big) =
	\sum \pm \ x{(1)} \bm{\otimes} \cdots \bm{\otimes} x{(r)}
	\]
	with each $x(i) \in \chains(\cube^n)$ a basis element, then $x{(1)} \leq \cdots \leq x{(r)}$.
\end{lemma}

\begin{proof}
	For $r = 2$ we have for every $i \in \{1, \dots, n\}$ that
	\begin{align*}
	x(1)_i = [0]   & \iff x(2)_i = [0,1], \\
	x(1)_i = [0,1] & \iff x(2)_i = [1],
	\end{align*}
	and that neither $x(1)_i = [1]$ or $x(2)_i = [0]$ can occur, hence $x(1) \leq x(2)$.
	The claim for $r > 2$ follows from a straightforward induction argument.
\end{proof}

\begin{lemma}
	Let $x, y, z \in \chains(\cube^n)$ be basis elements.
	If $x, y \leq z$ then $(x \ast y) \leq z$.
\end{lemma}

\begin{proof}
	Recall that
	\begin{align*}
	(x_1 \otimes \cdots \otimes x_n) \ast (y_1 \otimes \cdots \otimes y_n) =
	(-1)^{|x|} \sum_{i=1}^n x_{<i}\, \epsilon(y_{<i}) \otimes x_i \ast y_i \otimes \epsilon(x_{>i}) \, y_{>i}.
	\end{align*}
	By assumption, for every $i$ we have $x_{<i} \leq z_{<i}$ and $y_{>i} \leq z_{>i}$, and if $x_i \ast y_i \neq 0$ then either $x_i = [1]$ or $y_i = [1]$ which implies $z_i = [1]$ as well.
\end{proof}

\begin{lemma}
	Let $x, y \in \chains(\cube^n)$ be basis elements.
	If $x \leq y$ then
	\begin{equation} \label{e:cs collapse as algebra map}
	\CScollapse_\ast(x \ast y) = \CScollapse_\ast(x) \ast \CScollapse_\ast(y).
	\end{equation}
\end{lemma}

\begin{proof}
	We present this proof a sequence of three claims. \newline

	\noindent \textit{Claim 1}.
	If $\CScollapse_\ast(x) = 0$ or $\CScollapse_\ast(y) = 0$ then
	\begin{equation} \label{e:zero for join}
	\CScollapse_\ast \big( x_{<i}\, \epsilon(y_{<i}) \otimes x_i \ast y_i \otimes \epsilon(x_{>i}) \, y_{>i} \big) = 0.
	\end{equation}

	Assume $\CScollapse_\ast(x) = 0$, that is, there exists a pair $p < q$ such that $x_p = [0]$ and $x_q = [0,1]$, then \eqref{e:zero for join} holds since:
	\begin{enumerate}
		\item If $i > q$, then $x_p$ and $x_q$ are part of $x_{<i}$.
		\item If $i = q$, then $x_q \ast y_q = 0$ for any $y_q$.
		\item If $i < q$, then $\varepsilon(x_{>i}) = 0$.
	\end{enumerate}
	Similarly, if there is a pair $p < q$ such that $y_p = [0]$ and $y_q = [0,1]$,  then \eqref{e:zero for join} holds since:
	\begin{enumerate}
		\item If $i < p$, then $y_p$ and $y_q$ are part of $y_{>i}$.
		\item If $i = p$ or, more generally, $y_i = [0]$, then $x_i = [0]$ and $x_i \ast y_i = 0$.
		\item If $i = q$ or, more generally, $y_i = [0,1]$, then $x_i \ast y_i = 0$ for any $x_i$.
		\item If $i > q$, then $\varepsilon(y_{<i}) = 0$.
		\item If $p < i < q$ and $y_i = [1]$ then either $x_i \ast x_j = 0$ or $x_i \ast x_j = [0,1]$, implying $(x \ast y)_p = [0]$ and $(x \ast y)_i = [0,1]$.
	\end{enumerate}
	This proves the first claim and identity \eqref{e:cs collapse as algebra map} under its hypothesis. \newline

	\noindent \textit{Claim 2}.
	If $\CScollapse_\ast(x) \neq 0$ and $\CScollapse_\ast(y) \neq 0$ then
	\[
	\CScollapse_\ast(x \ast y) = \CScollapse_\ast \big( x_{<p_x} \, \varepsilon(y_{<p_x}) \otimes \, x_{p_x} \! \ast y_{p_x} \otimes \varepsilon(x_{>p_x}) \, y_{>p_x} \big).
	\]

	To make sure the elements $x$ and $y$ have $[0]$ as a tensor factor in them we consider $\chains(\cube^n)$ as a subcomplex of $\chains(\cube^{n+1})$ via the inclusion that tensors on the right with $[0]$.
	By naturality, we do not loose generality making this assumption.
	Let $p_x = \min \big\{ i \mid x_i = [0] \big\}$ and let $p_y$ be defined analogously.

	Given the assumptions of the claim and \cref{l:kernel of psi} the basis elements
	\[
	v_x = x_{< p_x}
	\quad \text{ and } \quad
	v_y = y_{< p_y}
	\]
	have tensor factors in $\big\{ [0,1], [1] \big\}$, whereas
	\[
	w_x = x_{> p_x}
	\quad \text{ and } \quad
	w_y = y_{> p_y}
	\]
	have tensor factors in $\big\{ [0], [1] \big\}$.
	We remark that any of these could be the unit $1_\k$.
	Since $x \leq y$ we have that $p_x \leq p_y$.
	If $i < p_x$ then $x_i = [1]$ or $x_i = [0,1]$.
	If $x_i = [1]$, since $x_i \leq y_i$, it is impossible for $y_i = [0]$, the only case when $x_i \ast y_i \neq 0$.
	If $x_i = [0,1]$ then $x_i \ast y_i = 0$ for any $y_i$.
	If $i > p_x$, then either $x_i \ast y_i = 0$ or $x_i \ast y_i = [0,1]$.
	In the first case there is nothing to prove and in the second we notice that $(x \ast y)_{p_x} = [0]$ and $(x \ast y)_{} = [0,1]$ so $\CScollapse_\ast(x \ast y) = 0$.
	This establishes the second claim. \newline

	\noindent \textit{Claim 3}.
	If $\CScollapse_\ast(x) \neq 0$ and $\CScollapse_\ast(y) \neq 0$ then \eqref{e:cs collapse as algebra map} holds.

	Let $q_y$ be the tensor position of the first occurrence of the tensor factor $[0,1]$ in $y$, setting it to $+\infty$, if not present.
	If $p_x > q_y$ then $x \ast y = 0$ since $\varepsilon(y_{<p_x}) = 0$, and if $p_x = q_y$ then $x \ast y = 0$ since $[0] \ast [0,1] = 0$.
	We now prove that in this case $\CScollapse_\ast(x) \ast \CScollapse_\ast(y) = 0$.
	Given that $x_{q_y} = [0,1]$ since $x \leq y$ and $x_{p_x}$ is the first tensor factor equal to $[0]$.
	This implies that both $\CScollapse_\ast(x)$ and $\CScollapse_\ast(y)$ contain the vertex $q_{y} - 1$.
	Let us now assume that $p_x < q_y$.
	Then, using that $y_i = [1]$ for every $i < p_x$ and the second claim we have
	\begin{align*}
	\CScollapse_\ast(x \ast y) & =
	\CScollapse_\ast \big( v_x \otimes x_{p_x} \ast y_{p_x} \otimes w_y \big) \\ & =
	\CScollapse_\ast(x) \ast \CScollapse_\ast(y)
	\end{align*}
	as desired.
\end{proof}

%\begin{proof}
%	\textit{Claim 1}. If $\CScollapse_\ast(x) = 0$ or $\CScollapse_\ast(y) = 0$ then
%	\begin{equation} \label{e:zero for join}
%	\CScollapse_\ast \big( x_{<i}\, \epsilon(y_{<i}) \otimes x_i \ast y_i \otimes \epsilon(x_{>i}) \, y_{>i} \big) = 0.
%	\end{equation}
%	Assume $\CScollapse_\ast(x) = 0$, that is, there exists a pair $p < q$ such that $x_p = [0]$ and $x_q = [0,1]$, then \eqref{e:zero for join} holds since:
%	\begin{enumerate}
%		\item If $i > q$, then $x_p$ and $x_q$ are part of $x_{<i}$.
%		\item If $i = q$, then $x_q \ast y_q = 0$ for any $y_q$.
%		\item If $i < q$, then $\varepsilon(x_{>i}) = 0$.
%	\end{enumerate}
%	Similarly, if there is a pair $p < q$ such that $y_p = [0]$ and $y_q = [0,1]$,  then \eqref{e:zero for join} holds since:
%	\begin{enumerate}
%		\item If $i < p$, then $y_p$ and $y_q$ are part of $y_{>i}$.
%		\item If $i = p$ or, more generally, $y_i = [0]$, then $x_i = [0]$ and $x_i \ast y_i = 0$.
%		\item If $i = q$ or, more generally, $y_i = [0,1]$, then $x_i \ast y_i = 0$ for any $x_i$.
%		\item If $i > q$, then $\varepsilon(y_{<i}) = 0$.
%		\item If $p < i < q$ and $y_i = [1]$ then either $x_i \ast x_j = 0$ or $x_i \ast x_j = [0,1]$, implying $(x \ast y)_p = [0]$ and $(x \ast y)_i = [0,1]$.
%	\end{enumerate}
%	\textit{Claim 2}. If $\CScollapse_\ast(x) \neq 0$ and $\CScollapse_\ast(y) \neq 0$ then
%	\[
%	\CScollapse_\ast(x \ast y) =
%	\CScollapse_\ast(x) \ast \CScollapse_\ast(y).
%	\]
%	Given these assumptions there exist basis elements $v_x, v_y$ having tensor factors in $\{[0,1], [1]\}$, and $w_x, w_y$ with tensor factors in $\{[0], [1]\}$ such that
%	\[
%	x = v_x \otimes [0] \otimes w_x, \qquad
%	y = v_y \otimes [0] \otimes w_y.
%	\]
%	Let $p_x$ and $p_y$ be the tensor position of the first $[0]$ in $x$ and $y$ respectively.
%	To make sure all possible elements $x$ and $y$ have a factor $[0]$ in them we consider $\chains(\cube^n)$ as a subcomplex of $\chains(\cube^{n+1})$ via the inclusion that tensors on the right with $[0]$.
%	By naturality, we do not loose generality making this assumption.
%	Since $x \leq y$ we have that $p_x \leq p_y$.
%	We will now show that
%	\[
%	\CScollapse_\ast(x \ast y) = \CScollapse_\ast \big( x_{<p_x} \, \varepsilon(y_{<p_x}) \otimes \, x_{p_x} \! \ast y_{p_x} \otimes \varepsilon(x_{>p_x}) \, y_{>p_x} \big).
%	\]
%	To see this we notice that if $i < p_x$ then $x_i = [1]$ or $x_i = [0,1]$.
%	If $x_i = [1]$, since $x_i \leq y_i$, it is impossible for $y_i = [0]$, the only case when $x_i \ast y_i \neq 0$.
%	If $x_i = [0,1]$ then $x_i \ast y_i = 0$ for any $y_i$.
%	If $i > p_x$, then either $x_i \ast y_i = 0$ or $x_i \ast y_i = [0,1]$.
%	In the first case there is nothing to prove and in the second we notice that $(x \ast y)_{p_x} = [0]$ and $(x \ast y)_{} = [0,1]$ so $\CScollapse_\ast(x \ast y) = 0$.
%
%	Let $q_y$ be the tensor position of the first occurrence of the tensor factor $[0,1]$ in $y$, setting it to $+\infty$, if not present.
%	If $p_x > q_y$ then $x \ast y = 0$ since $\varepsilon(y_{<p_x}) = 0$, and if $p_x = q_y$ then $x \ast y = 0$ since $[0] \ast [0,1] = 0$.
%	We now prove that in this case $\CScollapse_\ast(x) \ast \CScollapse_\ast(y) = 0$.
%	Since $x_{q_y} = [0,1]$ since $x \leq y$ and $x_{p_x}$ is the first tensor factor equal to $[0]$.
%	This implies that both $\CScollapse_\ast(x)$ and $\CScollapse_\ast(y)$ contain the vertex $q_{y} - 1$.
%	Let us now assume that $p_x < q_y$.
%	Then, using that $y_i = [1]$ for every $i < p_x$,
%	\begin{align*}
%	\CScollapse_\ast(x \ast y) & =
%	\CScollapse_\ast \big( v_x \otimes x_{p_x} \ast y_{p_x} \otimes w_y \big) \\ & =
%	\CScollapse_\ast(x) \ast \CScollapse_\ast(y)
%	\end{align*}
%	as claimed.
%\end{proof}

\begin{proof}[Proof of \cref{l:main comparison}]
	This sequence of lemmas provides a proof of \cref{l:main comparison} using the decomposition of any surjection-like graph into pieces \coproduct \ and \product.
\end{proof}